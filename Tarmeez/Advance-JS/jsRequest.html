<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Request</title>
</head>
<body>
    <h1 id="content">Test Request</h1>

    <script>

        function getPost() {
            let request = new XMLHttpRequest();
            request.open("GET", "https://jsonplaceholder.typicode.com/posts");
            request.send();            
            request.responseType = "json";
            request.onload = () => {
                if (request.status >= 200 && request.status < 300) {
                    let posts = request.response;
                    for (post of posts) {
                        document.getElementById('content').innerHTML += `<h1>${post.title}</h1?`
                    }
                }else {
                    alert('Eror')
                }
                
            }
        }


        function createPost() {
            let request = new XMLHttpRequest();
            request.open("POST", "https://jsonplaceholder.typicode.com/posts");
            request.responseType = "json";
            request.setRequestHeader("Accept", "application/json");
            request.setRequestHeader("Content-type", "application/json");
            let bodyParams = `
                {
                    "title": "lorem aoiuf",
                    "body": "odufakjrenrlkjsf",
                    "userId": 2
                }
            `
            request.send(bodyParams)

            request.onload = () => {
                if (request.status >= 200 && request.status < 300) {
                    let response = request.response;
                    console.log(response);
                    console.log("The status code is " + request.status);
                    alert("The post has been created secsasfully")
                }
                
            }
        }

        function updatePost() {
            let request = new XMLHttpRequest();
            request.open("PUT", "https://jsonplaceholder.typicode.com/posts/1");
            request.responseType = "json";
            request.setRequestHeader("Accept", "application/json");
            request.setRequestHeader("Content-type", "application/json");
            let bodyParams = `
                {
                    "title": "Hello JS",
                    "body": "odufakjrenrlkjsf",
                    "userId": 2
                }
            `
            request.send(bodyParams)

            request.onload = () => {
                if (request.status >= 200 && request.status < 300) {
                    let response = request.response;
                    console.log(response);
                    console.log("The status code is " + request.status);
                    alert("The post has been updated secsasfully")
                }
                
            }
        }

        function deletePost() {
            let request = new XMLHttpRequest();
            request.open("DELETE", "https://jsonplaceholder.typicode.com/posts/1");
            request.responseType = "json";
            request.setRequestHeader("Accept", "application/json");
            request.setRequestHeader("Content-type", "application/json");
            request.send()
            request.onload = () => {
                if (request.status >= 200 && request.status < 300) {
                    let response = request.response;
                    console.log(response);
                    console.log("The status code is " + request.status);
                    alert("The post has been deleted secsasfully")
                }
                
            }
        }

        
        function getPostWithUserFilter() {
            let request = new XMLHttpRequest();
            request.open("GET", "https://jsonplaceholder.typicode.com/posts?userId=2");
            request.send();            
            request.responseType = "json";
            request.onload = () => {
                if (request.status >= 200 && request.status < 300) {
                    let posts = request.response;
                    for (post of posts) {
                        document.getElementById('content').innerHTML += `<h1>${post.title}</h1?`
                    }
                }else {
                    alert('Eror')
                }
                
            }
        }
        
        // createPost()
        // getPost()
        // updatePost()
        // deletePost()
        getPostWithUserFilter()
    </script>
</body>
</html>